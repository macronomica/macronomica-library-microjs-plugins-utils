{"version":3,"sources":["../src/check-required.js"],"names":["property","params","value","code","hasMany","Array","isArray","message","details","length","diff","reduce","row","includes","push","JSON","stringify"],"mappings":";;;;;;kBACe,UAACA,QAAD,EAAWC,MAAX,EAAmBC,KAAnB,EAA6B;AAC1C,MAAMC,2BAA0BH,QAA1B,iBAAN;AACA,MAAMI,UAAUC,MAAMC,OAAN,CAAcJ,KAAd,CAAhB;;AAEA,MAAI,CAACE,OAAD,IAAY,CAACF,KAAjB,EAAwB;AACtB,WAAO;AACLC,gBADK;AAELI,uEAAuBP,QAAvB,0EAFK;AAGLQ,eAASN;AAHJ,KAAP;AAKD;;AAED,MAAIE,WAAWH,OAAOQ,MAAP,KAAkBP,MAAMO,MAAvC,EAA+C;AAC7C,QAAMC,OAAOT,OAAOU,MAAP,CAAc,UAACD,IAAD,EAAOE,GAAP,EAAe;AACxC,UAAI,CAACV,MAAMW,QAAN,CAAeD,IAAKZ,QAAL,CAAf,CAAL,EAAsC;AACpCU,aAAKI,IAAL,CAAUF,GAAV;AACD;;AAED,aAAOF,IAAP;AACD,KANY,EAMV,EANU,CAAb;;AAQA,WAAO;AACLP,gBADK;AAELI,uEAAuBP,QAAvB,mIAA8De,KAAKC,SAAL,CAAeN,IAAf,CAA9D,OAFK;AAGLF,eAASE;AAHJ,KAAP;AAKD;AACF,C","file":"check-required.js","sourcesContent":["\nexport default (property, params, value) => {\n  const code = `error.property.${ property }.is.required`;\n  const hasMany = Array.isArray(value);\n\n  if (!hasMany && !value) {\n    return {\n      code,\n      message: `Свойство \"${ property }\" обязательно`,\n      details: value\n    };\n  }\n\n  if (hasMany && params.length !== value.length) {\n    const diff = params.reduce((diff, row) => {\n      if (!value.includes(row[ property ])) {\n        diff.push(row);\n      }\n\n      return diff;\n    }, []);\n\n    return {\n      code,\n      message: `Свойство \"${ property }\" обязательно в записях: \"${ JSON.stringify(diff) }\"`,\n      details: diff\n    };\n  }\n};"]}